<!doctype html>
<html lang="ru">
<head> ... </head>
<body>
  <header>
  <div class="logo-name"><img alt="image" src="./image/logo1.png" class="logo-nav">
  <a href="index.html" class="logo">Сыроварня Любимая</a></div>
  <nav>
    <a href="index.html">Главная</a>
    <a href="about.html">О нас</a>
    <a href="products.html">Продукция</a>
    <a href="contacts.html">Контакты</a>
    <a href="cart.html">Корзина</a>
    <a href="login.html" id="auth-link">Вход</a>
  </nav>
  <div class="burger">
    <div></div>
    <div></div>
    <div></div>
  </div>
</header>

<div class="mobile-menu">
  <div class="close-menu">&times;</div>
  <a href="index.html">Главная</a>
  <a href="about.html">О нас</a>
  <a href="products.html">Продукция</a>
  <a href="contacts.html">Контакты</a>
  <a href="cart.html">Корзина</a>
  <a href="login.html" id="auth-link-mobile">Вход</a>
</div>

  <main style="max-width:720px;margin:40px auto;padding:0 16px;">
    <h1>Профиль</h1>
    <p id="profile-info">Загрузка...</p>
    <button id="logout-btn" class="button-primary">Выйти</button>
  </main>

  <script type="module" src="/app.js"></script>
  <script>
    // подключаемся к текущему пользователю из app.js (onAuthStateChanged уже работает)
    document.addEventListener('DOMContentLoaded', () => {
      const info = document.getElementById('profile-info');
      const btn = document.getElementById('logout-btn');
      // простая проверка через onAuthStateChanged уже в app.js обновит ссылку,
      // но мы можем показать базовую инфу:
      // poll current user from firebase auth via window.lubimayaAuth (not exposed), so use auth state change:
      import('https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js').then(() => {
        // rely on app.js onAuthStateChanged: currentUser visible? not exported, but auth link text changes.
      });

      btn.addEventListener('click', async () => {
        // вызов exposed logout
        if (window.lubimayaAuth && window.lubimayaAuth.logoutUser) {
          await window.lubimayaAuth.logoutUser();
          window.location.href = 'index.html';
        } else {
          // fallback: попробовать signOut via direct import (unlikely)
          location.href = 'index.html';
        }
      });
    });
  </script>
</body>
</html>
